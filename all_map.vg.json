{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
   	"title": { "text": "All storms, 1980 to 2025" },
    "projection" : {"type" : "equirectangular"},

    "width": 500,
    "height": 400,
    "view": {"fill": "lightblue"},

    "params" : [
    {
        "name" : "whichType",
        "value" : "hail",
        "bind" : {
            "input" : "select",
            "options" : ["hail", "lightning", "rain", "wind"],
            "name" : "Select storm type: ",
            "labels" :  ["Hail", "Lightning", "Rain", "Wind"]
        }
    }

    ],

    "layer" : [ 
        {
            "data" : {
                "url" : "data/ne_50m_state+grid_AUS.json",
                "format" : {"type" : "topojson", "feature" :"ne_50m_graticules_10" }            
            },
            "mark" : {"type" : "geoshape", "fill" : null, "stroke": "grey"}
        },
        {
            "data" : {
                "url" : "data/ne_50m_state+grid_AUS.json",
                "format" : {"type" : "topojson", "feature" :"ne_50m_admin_1_states_provinces" }            
            },
            "mark" : {"type" : "geoshape", "fill" : "lightgray", "stroke": "black"}
        },
        {
            "data" : {
                "url" : "data/Bulk ALL 80-25.csv"
            },

           "transform" : [
                {
                    "filter" : { "field" :"TYPE2", "equal" : {"expr" :"whichType"}} 
                },
                {
                    "filter" :  "110 < datum.Longitude"
                },
                {
                    "filter" :  "datum.Longitude < 160"
                },
                {
                    "filter" :  "datum.Latitude < 0"
                }
            ],

            "mark" : {
                "type" : "circle",
                "tooltip" : true
            },

            "encoding" : {
                "longitude" : {"field" : "Longitude", "type" :"quantitative"},
                "latitude" : {"field" : "Latitude", "type" :"quantitative"},                
                
                "opacity" : {"value" : 0.6},
                "size" : {"value" : 7},
                "color" : {"value" : "#2c7bb6"},

                "tooltip" : [
                    {"field" : "TYPE2", "title" : "Storm type"},
                    {"field" : "Year", "type" :"ordinal"},
                    {"field" : "State", "type" :"nominal"} 
                ]

            }
        }        

    ]
}        